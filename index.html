<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Flappy Bird with Flying Object</title>
  <style>
    canvas {
      border: 1px solid black;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="600" height="400"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Your Flappy Bird game variables
let birdY = 200;
let birdVelocity = 0;
const gravity = 0.6;
const birdSize = 40;

// Load flying object sprite
const flyingImage = new Image();
flyingImage.src = 'your-flying.png'; // Replace with your sprite image path

// Array to hold flying objects
const flyingObjects = [];

// Utility to get random number
function getRandom(min, max) {
  return Math.random() * (max - min) + min;
}

// Function to spawn flying object
function spawnFlyingObject() {
  const startSide = Math.random() < 0.5 ? 'left' : 'right';
  const entryY = getRandom(50, canvas.height - 50);
  const exitY = getRandom(50, canvas.height - 50);
  const duration = 2000; // 2 seconds

  const sprite = {
    startTime: performance.now(),
    duration: duration,
    startX: startSide === 'left' ? -50 : canvas.width + 50,
    startY: entryY,
    endX: startSide === 'left' ? canvas.width + 50 : -50,
    endY: exitY,
    currentX: 0,
    currentY: 0,
  };

  flyingObjects.push(sprite);
}

// Example: spawn a flying object every 10 seconds
setInterval(spawnFlyingObject, 10000);

// Main update function
function update() {
  // Update bird physics
  birdVelocity += gravity;
  birdY += birdVelocity;

  // Keep bird within bounds
  if (birdY + birdSize > canvas.height) {
    birdY = canvas.height - birdSize;
    birdVelocity = 0;
  }
  if (birdY < 0) {
    birdY = 0;
    birdVelocity = 0;
  }

  // Update flying objects
  const now = performance.now();
  for (let i = flyingObjects.length - 1; i >= 0; i--) {
    const obj = flyingObjects[i];
    const elapsed = now - obj.startTime;
    if (elapsed > obj.duration) {
      flyingObjects.splice(i, 1);
      continue;
    }
    const t = elapsed / obj.duration;
    obj.currentX = obj.startX + (obj.endX - obj.startX) * t;
    obj.currentY = obj.startY + (obj.endY - obj.startY) * t;
  }
}

// Main draw function
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw flying objects
  for (const obj of flyingObjects) {
    ctx.drawImage(flyingImage, obj.currentX, obj.currentY);
  }

  // Draw your bird (simple rectangle for example)
  ctx.fillStyle = 'yellow';
  ctx.fillRect(50, birdY, birdSize, birdSize);
}

// Main game loop
function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

// Start game once image loads
flyingImage.onload = () => {
  gameLoop();
}

// Add event listener for flap
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space' || e.code === 'ArrowUp') {
    birdVelocity = -10; // Flap
  }
});
</script>
</body>
</html>
